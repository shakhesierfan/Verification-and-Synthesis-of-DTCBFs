param Ts;
param mc;
param mp;
param g;
param L;
param u_max;
param epsilon_f;


param lb {1..24};
param ub {1..24};

param initial_lb {1..4};
param initial_ub {1..4};

param f1_ub;
param f2_ub;

var x {i in 1..24} >= lb[i], <= ub[i];

var u = x[1]*x[14]^2 + x[2]*x[13]^2 + x[3]*x[13]*x[14] + x[4]*x[14] + x[5]*x[13];


minimize obj: 2*( x[6]*x[10]^2 + x[7]*x[9]^2 - x[8]*x[9]*x[10] + (x[8]^2 - 4*x[6]*x[7]) )/( (4*x[6]*x[7] - x[8]^2)^1.5 + 1e-3 );


subject to c1: x[10] + x[9]*((Ts*(sin(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - cos(x[11])*(x[5] + x[3]*x[12] + 2*x[2]*x[11]) + g*cos(x[11])*(mc + mp) - L*mp*x[12]^2*cos(x[11])^2 + L*mp*x[12]^2*sin(x[11])^2))/(L*(mp*sin(x[11])^2 + mc)) + (2*Ts*mp*cos(x[11])*sin(x[11])*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)^2)) + x[8]*(x[12] - (Ts*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc))) + x[7]*(2*x[11] + 2*Ts*x[12]) + x[8]*((Ts*(sin(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - cos(x[11])*(x[5] + x[3]*x[12] + 2*x[2]*x[11]) + g*cos(x[11])*(mc + mp) - L*mp*x[12]^2*cos(x[11])^2 + L*mp*x[12]^2*sin(x[11])^2))/(L*(mp*sin(x[11])^2 + mc)) + (2*Ts*mp*cos(x[11])*sin(x[11])*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)^2))*(x[11] + Ts*x[12]) + 2*x[6]*(x[12] - (Ts*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)))*((Ts*(sin(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - cos(x[11])*(x[5] + x[3]*x[12] + 2*x[2]*x[11]) + g*cos(x[11])*(mc + mp) - L*mp*x[12]^2*cos(x[11])^2 + L*mp*x[12]^2*sin(x[11])^2))/(L*(mp*sin(x[11])^2 + mc)) + (2*Ts*mp*cos(x[11])*sin(x[11])*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)^2)) + x[15]*( -2*x[7]*x[11] - x[8]*x[12] - x[10] )  - x[16] + x[17] == 0;

subject to c2: x[10]*Ts - x[9]*((Ts*(cos(x[11])*(x[4] + 2*x[1]*x[12] + x[3]*x[11]) + 2*L*mp*x[12]*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)) - 1) - 2*x[6]*((Ts*(cos(x[11])*(x[4] + 2*x[1]*x[12] + x[3]*x[11]) + 2*L*mp*x[12]*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)) - 1)*(x[12] - (Ts*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc))) + x[8]*Ts*(x[12] - (Ts*(cos(x[11])*(x[1]*x[12]^2 + x[3]*x[12]*x[11] + x[4]*x[12] + x[2]*x[11]^2 + x[5]*x[11]) - g*sin(x[11])*(mc + mp) + L*mp*x[12]^2*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc))) - x[8]*((Ts*(cos(x[11])*(x[4] + 2*x[1]*x[12] + x[3]*x[11]) + 2*L*mp*x[12]*cos(x[11])*sin(x[11])))/(L*(mp*sin(x[11])^2 + mc)) - 1)*(x[11] + Ts*x[12]) + 2*x[7]*Ts*(x[11] + Ts*x[12]) + x[15]*( -2*x[6]*x[12] - x[8]*x[11] - x[9] )  - x[18] + x[19] == 0;


subject to c3: x[15]*( -x[6]*x[12]^2 - x[7]*x[11]^2 - x[8]*x[11]*x[12] - x[9]*x[12] - x[10]*x[11] - 1 ) == 0;
subject to c4: x[16]*(initial_lb[1] - x[11]) == 0;
subject to c5: x[17]*(x[11]  - initial_ub[1]) == 0;
subject to c6: x[18]*(initial_lb[2] - x[12]) == 0;
subject to c7: x[19]*(x[12]  - initial_ub[2]) == 0;

subject to c8: -2*(2*x[2]*x[13] + x[3]*x[14] + x[5])*(u  ) + x[20]*( -2*x[7]*x[13] - x[8]*x[14] - x[10] )  - x[21] + x[22] == 0;

subject to c9: -2*(2*x[1]*x[14] + x[3]*x[13] + x[4])*( u ) + x[20]*( -2*x[6]*x[14] - x[8]*x[13] - x[9]  )  - x[23] + x[24]  == 0;


subject to c10: x[20]*( -x[6]*x[14]^2 - x[7]*x[13]^2 - x[8]*x[13]*x[14] - x[9]*x[14] - x[10]*x[13] - 1 ) == 0;

subject to c11: x[21]*(initial_lb[3] - x[13]) == 0;
subject to c12: x[22]*(x[13]  - initial_ub[3]) == 0;
subject to c13: x[23]*(initial_lb[4] - x[14]) == 0;
subject to c14: x[24]*(x[14]  - initial_ub[4]) == 0;

subject to c15: -x[6]*x[12]^2 - x[7]*x[11]^2 - x[8]*x[11]*x[12] - x[9]*x[12] - x[10]*x[11] - 1  <= 0;
subject to c16: -x[6]*x[14]^2 - x[7]*x[13]^2 - x[8]*x[13]*x[14] - x[9]*x[14] - x[10]*x[13] - 1  <= 0;

subject to c17:  ( - x[6]*( x[12] + Ts*(-(x[1]*x[12]^2 + x[2]*x[11]^2 + x[3]*x[11]*x[12] + x[4]*x[12] + x[5]*x[11])*cos(x[11]) - mp*L*x[12]^2*cos(x[11])*sin(x[11]) + (mc+mp)*g*sin(x[11]))/(L*(mc + mp*sin(x[11])^2)) )^2 - x[7]*( x[11] + x[12]*Ts )^2 - x[8]*( x[11] + x[12]*Ts )*( x[12] + Ts*(-(x[1]*x[12]^2 + x[2]*x[11]^2 + x[3]*x[11]*x[12] + x[4]*x[12] + x[5]*x[11])*cos(x[11]) - mp*L*x[12]^2*cos(x[11])*sin(x[11]) + (mc+mp)*g*sin(x[11]))/(L*(mc + mp*sin(x[11])^2)) ) - x[9]*( x[12] + Ts*(-(x[1]*x[12]^2 + x[2]*x[11]^2 + x[3]*x[11]*x[12] + x[4]*x[12] + x[5]*x[11])*cos(x[11]) - mp*L*x[12]^2*cos(x[11])*sin(x[11]) + (mc+mp)*g*sin(x[11]))/(L*(mc + mp*sin(x[11])^2)) ) - x[10]*( x[11] + x[12]*Ts ) - 1  ) + epsilon_f <= 0;

subject to c18: u^2 - u_max^2 + epsilon_f <= 0;

subject to c19:  ( x[6]*( x[12] + Ts*(-(x[1]*x[12]^2 + x[2]*x[11]^2 + x[3]*x[11]*x[12] + x[4]*x[12] + x[5]*x[11])*cos(x[11]) - mp*L*x[12]^2*cos(x[11])*sin(x[11]) + (mc+mp)*g*sin(x[11]))/(L*(mc + mp*sin(x[11])^2)) )^2 + x[7]*( x[11] + x[12]*Ts )^2 + x[8]*( x[11] + x[12]*Ts )*( x[12] + Ts*(-(x[1]*x[12]^2 + x[2]*x[11]^2 + x[3]*x[11]*x[12] + x[4]*x[12] + x[5]*x[11])*cos(x[11]) - mp*L*x[12]^2*cos(x[11])*sin(x[11]) + (mc+mp)*g*sin(x[11]))/(L*(mc + mp*sin(x[11])^2)) ) + x[9]*( x[12] + Ts*(-(x[1]*x[12]^2 + x[2]*x[11]^2 + x[3]*x[11]*x[12] + x[4]*x[12] + x[5]*x[11])*cos(x[11]) - mp*L*x[12]^2*cos(x[11])*sin(x[11]) + (mc+mp)*g*sin(x[11]))/(L*(mc + mp*sin(x[11])^2)) ) + x[10]* ( x[11] + x[12]*Ts ) + 1  ) - f1_ub  <= 0;

subject to c20: -u^2 - f2_ub <= 0;

subject to c21: x[8]^2 - 4*x[6]*x[7] <= -1e-4;

subject to c22: x[6]*x[7] + 0.25*x[8]*x[9]*x[10] - 0.25*(x[6]*x[10]^2 + x[7]*x[9]^2 + x[8]^2) >= 1e-5;

subject to c23: -sqrt(1e-6 + 2*( x[6]*x[10]^2 + x[7]*x[9]^2 - x[8]*x[9]*x[10] + (x[8]^2 - 4*x[6]*x[7]) )*( (x[6] + x[7]) + sqrt( (x[6] - x[7])^2 + x[8]^2 + 1e-6  ) ) )/( ( x[8]^2 - 4*x[6]*x[7] ) + 1e-6 ) + sqrt(1e-6 + ( (2*x[7]*x[9] - x[8]*x[10])/( ( x[8]^2 - 4*x[6]*x[7] ) + 1e-6 ) )^2 + ( (2*x[6]*x[10] - x[8]*x[9])/( ( x[8]^2 - 4*x[6]*x[7] ) + 1e-6 ) )^2 )  <= 0.7852;

subject to c24: -sqrt(1e-6 + 2*( x[6]*x[10]^2 + x[7]*x[9]^2 - x[8]*x[9]*x[10] + (x[8]^2 - 4*x[6]*x[7]) )*( (x[6] + x[7]) - sqrt( (x[6] - x[7])^2 + x[8]^2 + 1e-6  ) ) )/( ( x[8]^2 - 4*x[6]*x[7] ) + 1e-6 ) + sqrt(1e-6 + ( (2*x[7]*x[9] - x[8]*x[10])/( ( x[8]^2 - 4*x[6]*x[7] ) + 1e-6 ) )^2 + ( (2*x[6]*x[10] - x[8]*x[9])/( ( x[8]^2 - 4*x[6]*x[7] ) + 1e-6 ) )^2 )  <= 0.7852;








